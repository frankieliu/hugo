<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site  | Flink</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.69.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="https://www.frankliu.org/hugo/dist/css/app.1cb140d8ba31d5b2f1114537dd04802a.css" rel="stylesheet">
    

    
      <link rel="stylesheet" type="text/css" href="https://www.frankliu.org/hugo/css/test.css">
    

    
      
    

    
    
    <meta property="og:title" content="Flink" />
<meta property="og:description" content="What is it  a distributed runtime uses pipelines for execution exactly-once state consistency lightweight checkpoint iterative processing windows semantics out-of-order processing  2 architecture cluster  client job manager task manager (1 or more)  client  takes a program xforms to dataflow graph submits to job manager creates data schema and serializers cost-based query optmization  job manager  coordinates distributed execution of dataflow tracks state and progress of each operator and stream schedules new operators coordinates checkpoints and recovery persists minimal set of data for checkpoint and recovery  task manager  executes one or more operators report status to job manager maintain buffer pools to buffer or materialize streams maintain network connections to exchange of streams between operators    3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.frankliu.org/hugo/posts/flink/" />
<meta property="article:published_time" content="2020-04-18T08:49:58-07:00" />
<meta property="article:modified_time" content="2020-04-25T11:29:15-07:00" />
<meta itemprop="name" content="Flink">
<meta itemprop="description" content="What is it  a distributed runtime uses pipelines for execution exactly-once state consistency lightweight checkpoint iterative processing windows semantics out-of-order processing  2 architecture cluster  client job manager task manager (1 or more)  client  takes a program xforms to dataflow graph submits to job manager creates data schema and serializers cost-based query optmization  job manager  coordinates distributed execution of dataflow tracks state and progress of each operator and stream schedules new operators coordinates checkpoints and recovery persists minimal set of data for checkpoint and recovery  task manager  executes one or more operators report status to job manager maintain buffer pools to buffer or materialize streams maintain network connections to exchange of streams between operators    3.">
<meta itemprop="datePublished" content="2020-04-18T08:49:58-07:00" />
<meta itemprop="dateModified" content="2020-04-25T11:29:15-07:00" />
<meta itemprop="wordCount" content="1141">



<meta itemprop="keywords" content="stream,distributed systems," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Flink"/>
<meta name="twitter:description" content="What is it  a distributed runtime uses pipelines for execution exactly-once state consistency lightweight checkpoint iterative processing windows semantics out-of-order processing  2 architecture cluster  client job manager task manager (1 or more)  client  takes a program xforms to dataflow graph submits to job manager creates data schema and serializers cost-based query optmization  job manager  coordinates distributed execution of dataflow tracks state and progress of each operator and stream schedules new operators coordinates checkpoints and recovery persists minimal set of data for checkpoint and recovery  task manager  executes one or more operators report status to job manager maintain buffer pools to buffer or materialize streams maintain network connections to exchange of streams between operators    3."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://www.frankliu.org/hugo/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://www.frankliu.org/hugo/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://www.frankliu.org/hugo/posts/" title="Articles page">
              Articles
            </a>
          </li>
          
        </ul>
      
      



<a href="https://www.facebook.com/frankie.liu.9279" target="_blank" class="link-transition facebook link dib z-999 pt3 pt0-l mr1" title="Facebook link" rel="noopener" aria-label="follow on Facebook——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://twitter.com/pi31415629" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/frankieyliu/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/frankieliu" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>



<a href="https://medium.com/eins-zwei" target="_blank" class="link-transition medium link dib z-999 pt3 pt0-l mr1" title="Medium link" rel="noopener" aria-label="follow on Medium——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://discordapp.com/users/523372803387293696" target="_blank" class="link-transition discord link dib z-999 pt3 pt0-l mr1" title="Discord link" rel="noopener" aria-label="follow on Discord——Opens in a new window">
  

<svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<g
   id="g16"
   transform="matrix(0.73347458,0,0,0.73347458,-4.35805,2.2690639)"><path
     id="path2"
     d="m 104.4,103.9 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0.1,-6.1 -4.5,-11.1 -10.2,-11.1 z m 36.5,0 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0,-6.1 -4.5,-11.1 -10.2,-11.1 z"
     class="st0"
     inkscape:connector-curvature="0" /><path
     id="path4"
     d="M 189.5,20 H 55.5 C 44.2,20 35,29.2 35,40.6 v 135.2 c 0,11.4 9.2,20.6 20.5,20.6 h 113.4 l -5.3,-18.5 12.8,11.9 12.1,11.2 21.5,19 V 40.6 C 210,29.2 200.8,20 189.5,20 Z m -38.6,130.6 c 0,0 -3.6,-4.3 -6.6,-8.1 13.1,-3.7 18.1,-11.9 18.1,-11.9 -4.1,2.7 -8,4.6 -11.5,5.9 -5,2.1 -9.8,3.5 -14.5,4.3 -9.6,1.8 -18.4,1.3 -25.9,-0.1 -5.7,-1.1 -10.6,-2.7 -14.7,-4.3 -2.3,-0.9 -4.8,-2 -7.3,-3.4 -0.3,-0.2 -0.6,-0.3 -0.9,-0.5 -0.2,-0.1 -0.3,-0.2 -0.4,-0.3 -1.8,-1 -2.8,-1.7 -2.8,-1.7 0,0 4.8,8 17.5,11.8 -3,3.8 -6.7,8.3 -6.7,8.3 -22.1,-0.7 -30.5,-15.2 -30.5,-15.2 0,-32.2 14.4,-58.3 14.4,-58.3 14.4,-10.8 28.1,-10.5 28.1,-10.5 l 1,1.2 c -18,5.2 -26.3,13.1 -26.3,13.1 0,0 2.2,-1.2 5.9,-2.9 10.7,-4.7 19.2,-6 22.7,-6.3 0.6,-0.1 1.1,-0.2 1.7,-0.2 6.1,-0.8 13,-1 20.2,-0.2 9.5,1.1 19.7,3.9 30.1,9.6 0,0 -7.9,-7.5 -24.9,-12.7 l 1.4,-1.6 c 0,0 13.7,-0.3 28.1,10.5 0,0 14.4,26.1 14.4,58.3 0,0 -8.5,14.5 -30.6,15.2 z"
     class="st0"
     inkscape:connector-curvature="0" /></g></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


    </div>
  </div>
</nav>

    </div>
  </header>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
    extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
    });
</script>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        ARTICLES
      </p>
      <h1 class="f1 athelas mb1">Flink</h1>
      
      <p class="tracked">
          By <strong>
          
              adam
          
          </strong>
      </p>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-04-18T08:49:58-07:00">April 18, 2020</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h2 id="what-is-it">What is it</h2>
<ul>
<li>a distributed runtime</li>
<li>uses pipelines for execution</li>
<li>exactly-once state consistency</li>
<li>lightweight checkpoint</li>
<li>iterative processing</li>
<li>windows semantics</li>
<li>out-of-order processing</li>
</ul>
<h2 id="2-architecture">2 architecture</h2>
<h3 id="cluster">cluster</h3>
<ul>
<li>client</li>
<li>job manager</li>
<li>task manager (1 or more)</li>
</ul>
<h3 id="client">client</h3>
<ul>
<li>takes a program</li>
<li>xforms to dataflow graph</li>
<li>submits to job manager</li>
<li>creates data schema and serializers</li>
<li>cost-based query optmization</li>
</ul>
<h3 id="job-manager">job manager</h3>
<ul>
<li>coordinates distributed execution of dataflow</li>
<li>tracks state and progress of each operator and stream</li>
<li>schedules new operators</li>
<li>coordinates checkpoints and recovery</li>
<li>persists minimal set of data for checkpoint and recovery</li>
</ul>
<h3 id="task-manager">task manager</h3>
<ul>
<li>executes one or more operators</li>
<li>report status to job manager</li>
<li>maintain buffer pools to buffer or materialize streams</li>
<li>maintain network connections to exchange of streams between operators</li>
</ul>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/process.png"/> 
</figure>

<h2 id="3-dot-1-dataflow-graphs">3.1 dataflow graphs</h2>
<ul>
<li>stateful operators</li>
<li>data streams</li>
<li>data-parallel fashion</li>
<li>operators
-parallelized into one or more parallel instances (subtasks)</li>
<li>stream split into one or more stream partitions</li>
</ul>
<h2 id="3-dot-2-data-exchange">3.2 data exchange</h2>
<h3 id="intermediate-data-streams">Intermediate data streams</h3>
<ul>
<li>core abstraction for data-exchange between operators</li>
<li>represents a logical handle</li>
</ul>
<h3 id="pipelined-streams">Pipelined streams</h3>
<ul>
<li>propagate back pressure from consumers to producers
<ul>
<li>via intermediate buffer pools</li>
<li>avoid materializatoin when possible</li>
</ul>
</li>
</ul>
<h3 id="blocking-streams">Blocking streams</h3>
<ul>
<li>buffers all the producing operators data before making
available for consumers</li>
<li>used to isolate successive operators
<ul>
<li>ex. sort-merge joins may cause distributed deadlock
<img src="https://www.frankliu.org/hugo/images/flink/sort-merge-join.png" alt="">
<img src="https://www.frankliu.org/hugo/images/flink/radix-hash-join.png" alt=""></li>
</ul>
</li>
</ul>
<h3 id="implementation">implementation</h3>
<ul>
<li>exchange of buffers</li>
<li>set high buffer size (1kB) for high throughput</li>
<li>set low timeout (2 ms) for low latency</li>
</ul>
<h3 id="control">control</h3>
<ul>
<li>checkpoint barriers</li>
<li>watermark signals</li>
<li>iteration barriers</li>
<li>unary operators consule in FIFO order</li>
<li>more than one stream merge in arrival order
<ul>
<li>Flink does not provide ordering guarantees after repartitioning</li>
<li>let the operators figure out how to deal with out of order</li>
</ul>
</li>
</ul>
<h2 id="3-dot-3-fault-tolerance">3.3 fault tolerance</h2>
<ul>
<li>promises exactly once processing consistency</li>
<li>uses checkpointing and partial re-execution
<ul>
<li>data sources are persistent and replayable</li>
</ul>
</li>
<li>take consistent snapshot of all operators
<ul>
<li>must refer to same logical time in the computation</li>
</ul>
</li>
<li>Asynchronous Barrier Snapshotting
<ul>
<li>operator receives barriers from upstream</li>
<li>perform alignment
<ul>
<li>make sure barriers from all inputs have been received</li>
</ul>
</li>
<li>operator writes its state to persistent storage</li>
<li>after backup, forwards the barrier</li>
</ul>
</li>
</ul>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs.png"/> 
</figure>

<ul>
<li>Example:
snapshot t2 contains all operator states that are the result of consuming all
records before t2 barrier.</li>
<li>don&rsquo;t need to snapshot in-flight records</li>
<li>restart from lastest barrier with a snapshot</li>
<li>guarantees:
<ul>
<li>exactly once state updates</li>
<li>decoupled from control</li>
<li>decoupled from how it is stored</li>
</ul>
</li>
</ul>
<h3 id="details">Details</h3>
<ul>
<li>
<p>Paper: Lightweight Asynchronous Snapshots for Distributed Dataflows</p>
</li>
<li>
<p>Central coordinator periodically injects stage barriers</p>
</li>
<li>
<p>When source receives a barrier</p>
<ul>
<li>
<p>takes snapshot of its current state</p>
</li>
<li>
<p>broadcasts the barrier to all its output</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-1.png"/> 
</figure>

</li>
</ul>
</li>
<li>
<p>When a non-source task receives a barrier</p>
<ul>
<li>
<p>blocks that input until it receives a barrier from all inputs</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-2.png"/> 
</figure>

</li>
<li>
<p>when all barriers have been received
task takes snapshot of current state and broadcasts
the barrier to its outputs</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-3.png"/> 
</figure>

</li>
<li>
<p>task unblocks its input channels to continue computation</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-4.png"/> 
</figure>

</li>
</ul>
</li>
<li>
<p>legend</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-5.png"/> 
</figure>

</li>
<li>
<p>The complete global snapshot \(G^* = (T^*, E^*)\) will contain only
snapshots of the operator states, edge states don&rsquo;t need to be saved</p>
</li>
<li>
<p>Algorithm for non-cyclic graphs</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-6.png"/> 
</figure>

</li>
</ul>
<h3 id="cyclic-graphs">cyclic graphs</h3>
<ul>
<li>
<p>with cycles you will end up in a deadlock</p>
<ul>
<li>downstream tasks will be blocked because they
have not received a barrier</li>
</ul>
</li>
<li>
<p>records in transit in cycle would not be included
in snapshot</p>
</li>
<li>
<p>first indentify:</p>
<ol>
<li>back-edges</li>
<li>\(G(T,E\L)\) remove them, now you have a DAG</li>
<li>backup records received from back-edges
<ul>
<li>task \(t\) that has a back-edge: \(L_t \in I_t\)</li>
<li>\(I_t\) creates a backup log of all records received
from \(L_t\), when it forwards barriers until receiving
the barrier back in \(L_t\)</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Tasks with back-edge inputs create a local copy of their
state once all the regular (\(e \notin L\)) channels delivered
barriers.</p>
<p><img src="https://www.frankliu.org/hugo/images/flink/abs-7.png" alt="">
<img src="https://www.frankliu.org/hugo/images/flink/abs-8.png" alt=""></p>
</li>
<li>
<p>Allows all pre-shot recods that are in transit with loops
to be included in the current snapshot</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-9.png"/> 
</figure>

<p>The final global snapshot will include the back-edge records
in transit: \(G^* = (T^*, L^*)\).</p>
</li>
<li>
<p>Algorithm</p>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/abs-10.png"/> 
</figure>

</li>
</ul>
<h2 id="3-dot-4-iterative-dataflows">3.4 iterative dataflows</h2>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/iteration-model.png"/> 
</figure>

<ul>
<li>implemented as iteration steps</li>
<li>special operator that can contain an execution graph</li>
<li>to maintain DAG
<ul>
<li>introduce an iteration head and tail tasks
<ul>
<li>implicitly connected with feedback edges</li>
</ul>
</li>
<li>tasks establish active feedback channel</li>
<li>provide coordination for processing data records</li>
</ul>
</li>
</ul>
<h2 id="time">time</h2>
<ul>
<li>event time</li>
<li>process time</li>
<li>low watermarks mark gloval progress measure
<ul>
<li>time t such that all events lower than t have already entered operators</li>
<li>allow processing in correct event order and serialize operations</li>
<li>originate from the sources</li>
<li>propagates to other operators
<ul>
<li>map and filter just forward the watermarks</li>
<li>complex operators compute events triggered by a watermark, then fwd</li>
<li>if more than one input, only fwd the min of incoming watermarks</li>
</ul>
</li>
</ul>
</li>
<li>processing time used for lower latency</li>
<li>ingestion time: somewhere in between event time and processing time</li>
</ul>
<h2 id="stateful-stream">stateful stream</h2>
<ul>
<li>windows are stateful operators
<ul>
<li>fill memory buckets</li>
</ul>
</li>
<li>operator annotation used to statically register explicit local variables</li>
<li>k-v states declared with an operator</li>
<li>registered state is durable with exactly-one update</li>
</ul>
<h2 id="windows">windows</h2>
<ul>
<li>definition
<ul>
<li>assigner: assign record to logical window
<ul>
<li>a record can be assigned to multiple windows
<ul>
<li>as in sliding window</li>
</ul>
</li>
</ul>
</li>
<li>trigger: defines when the operation will be performed</li>
<li>evictor: determines what to keep</li>
</ul>
</li>
<li>types
<ul>
<li>periodic time</li>
<li>count windows</li>
<li>punctuation</li>
<li>landmark</li>
<li>session</li>
<li>delta</li>
</ul>
</li>
</ul>
<h3 id="example">Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">stream
    <span style="color:#f92672">.</span><span style="color:#a6e22e">window</span><span style="color:#f92672">(</span>SlidingTimeWindows<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>Time<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>6<span style="color:#f92672">,</span> SECONDS<span style="color:#f92672">),</span> Time<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>2<span style="color:#f92672">,</span> SECONDS<span style="color:#f92672">))</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">trigger</span><span style="color:#f92672">(</span>EventTimeTrigger<span style="color:#f92672">.</span><span style="color:#a6e22e">create</span><span style="color:#f92672">())</span>
</code></pre></div><ul>
<li>assigner: range 6 seconds, every 2 seconds</li>
<li>trigger: results computed once the watermark passes the end of the window</li>
</ul>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">stream
    <span style="color:#f92672">.</span><span style="color:#a6e22e">window</span><span style="color:#f92672">(</span>GlobalWindow<span style="color:#f92672">.</span><span style="color:#a6e22e">create</span><span style="color:#f92672">())</span>
    <span style="color:#f92672">.</span><span style="color:#a6e22e">trigger</span><span style="color:#f92672">(</span>Count<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>1000<span style="color:#f92672">))</span>
    <span style="color:#f92672">.</span><span style="color:#a6e22e">evict</span><span style="color:#f92672">(</span>Count<span style="color:#f92672">.</span><span style="color:#a6e22e">of</span><span style="color:#f92672">(</span>100<span style="color:#f92672">))</span>
</code></pre></div><ul>
<li>assigner: all events go to a single logical group</li>
<li>trigger: every 1000 events</li>
<li>evictor: keep only the last 100 elements</li>
</ul>
<h2 id="async-stream-iteration">async stream iteration</h2>
<p>feedback streams are treated as operator state</p>
<h2 id="batch-analytics">Batch analytics</h2>
<ul>
<li>query optimiztion</li>
<li>memory management</li>
<li>batch iterations</li>
</ul>
<h2 id="query-optimization">Query optimization</h2>
<ul>
<li>optimizer doesn&rsquo;t know about UDF&rsquo;s</li>
<li>cardinality: uses hints from the programmer</li>
<li>plan uses costs like network disk I/O and CPU</li>
<li>strategies
<ul>
<li>repartitioning</li>
<li>broadcast data transfer</li>
<li>sort based grouping</li>
<li>sort based and hash based join</li>
</ul>
</li>
</ul>
<h2 id="memory-management">Memory management</h2>
<ul>
<li>manages data into memory segments</li>
<li>sorting and joining work on binary</li>
<li>off-heap and binary
<ul>
<li>reduce gb</li>
<li>cache efficient</li>
</ul>
</li>
</ul>
<h2 id="iteration-control">Iteration control</h2>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/iterate.png"/> 
</figure>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">// set up execution environment
</span><span style="color:#75715e"></span>env <span style="color:#f92672">=</span> ExecutionEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">getExecutionEnvironment</span><span style="color:#f92672">();</span>

<span style="color:#75715e">// get input data:
</span><span style="color:#75715e">// read the points and centroids from the provided paths
</span><span style="color:#75715e">// or fall back to default data
</span><span style="color:#75715e"></span>points <span style="color:#f92672">=</span> getPointDataSet<span style="color:#f92672">(</span>params<span style="color:#f92672">,</span> env<span style="color:#f92672">);</span>
centroids <span style="color:#f92672">=</span> getCentroidDataSet<span style="color:#f92672">(</span>params<span style="color:#f92672">,</span> env<span style="color:#f92672">);</span>

<span style="color:#75715e">// set number of bulk iterations for KMeans algorithm
</span><span style="color:#75715e"></span>loop <span style="color:#f92672">=</span> centroids<span style="color:#f92672">.</span><span style="color:#a6e22e">iterate</span><span style="color:#f92672">(</span>params<span style="color:#f92672">.</span><span style="color:#a6e22e">getInt</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;iterations&#34;</span><span style="color:#f92672">,</span> 10<span style="color:#f92672">));</span>

newCentroids <span style="color:#f92672">=</span> points
      <span style="color:#75715e">// compute closest centroid for each point
</span><span style="color:#75715e"></span>      <span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> SelectNearestCenter<span style="color:#f92672">()).</span><span style="color:#a6e22e">withBroadcastSet</span><span style="color:#f92672">(</span>loop<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;centroids&#34;</span><span style="color:#f92672">)</span>
      <span style="color:#75715e">// count and sum point coordinates for each centroid
</span><span style="color:#75715e"></span>      <span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> CountAppender<span style="color:#f92672">())</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">groupBy</span><span style="color:#f92672">(</span>0<span style="color:#f92672">).</span><span style="color:#a6e22e">reduce</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> CentroidAccumulator<span style="color:#f92672">())</span>
      <span style="color:#75715e">// compute new centroids from point counts and coordinate sums
</span><span style="color:#75715e"></span>      <span style="color:#f92672">.</span><span style="color:#a6e22e">map</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> CentroidAverager<span style="color:#f92672">());</span>

<span style="color:#75715e">// feed new centroids back into next iteration
</span><span style="color:#75715e"></span>finalCentroids <span style="color:#f92672">=</span> loop<span style="color:#f92672">.</span><span style="color:#a6e22e">closeWith</span><span style="color:#f92672">(</span>newCentroids<span style="color:#f92672">);</span>
</code></pre></div><h3 id="delta-iterate">delta iterate</h3>
<p><img src="https://www.frankliu.org/hugo/images/flink/delta.png" alt="">
<img src="https://www.frankliu.org/hugo/images/flink/connected-components.png" alt=""></p>
<h3 id="bulk-synchronous-parallel">Bulk synchronous parallel</h3>
<ul>
<li>concurrent computation</li>
<li>communication</li>
<li>barrier synchronization</li>
</ul>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/bsp.png"/> 
</figure>

<ul>
<li>cost of BSP from wikipedia
\[\max_i w_i + \max_i h_ig + l\]
<ul>
<li>\(w_i\) is the computation cost</li>
<li>\(h_i\) the number of messages</li>
<li>\(g\) cost per message</li>
<li>\(l\) barrier synchronization cost</li>
</ul>
</li>
<li>this is for one superstep</li>
</ul>
<h3 id="superstep-synchronization">superstep synchronization</h3>
<p><a href="https://ci.apache.org/projects/flink/flink-docs-stable/dev/batch/iterations.html">iterations</a>
<img src="https://www.frankliu.org/hugo/images/flink/barrier-flink.png" alt=""></p>
<h3 id="stale-synchronous-parallel">Stale synchronous parallel</h3>
<figure>
    <img src="https://www.frankliu.org/hugo/images/flink/ssp.png"/> 
</figure>

<ul>
<li>workers at clock \(c\) can see updates at \([0,c-s-1]\)</li>
<li>here \(c\) counts the iterations in some algorithm, not wall clock time</li>
<li>\(s\) is a bound for staleness, guarantee that all workers at at most
\(s\) cycles away from each other</li>
<li>workers can always see their own updates \([0,c-1]\)</li>
<li>workers may see some updates from other workers \([c-s,c+s-1]\)</li>
</ul>
<ul class="pa0">
  
   <li class="list">
     <a href="https://www.frankliu.org/hugo/tags/stream" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">stream</a>
   </li>
  
   <li class="list">
     <a href="https://www.frankliu.org/hugo/tags/distributed-systems" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">distributed systems</a>
   </li>
  
</ul>
<div class="mt6">
      
      
			<script src="https://utteranc.es/client.js"
        repo="frankieliu/hugo"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>
      </div>
    </section>

    <aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">What&#39;s in this posts</p>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-it">What is it</a></li>
    <li><a href="#2-architecture">2 architecture</a>
      <ul>
        <li><a href="#cluster">cluster</a></li>
        <li><a href="#client">client</a></li>
        <li><a href="#job-manager">job manager</a></li>
        <li><a href="#task-manager">task manager</a></li>
      </ul>
    </li>
    <li><a href="#3-dot-1-dataflow-graphs">3.1 dataflow graphs</a></li>
    <li><a href="#3-dot-2-data-exchange">3.2 data exchange</a>
      <ul>
        <li><a href="#intermediate-data-streams">Intermediate data streams</a></li>
        <li><a href="#pipelined-streams">Pipelined streams</a></li>
        <li><a href="#blocking-streams">Blocking streams</a></li>
        <li><a href="#implementation">implementation</a></li>
        <li><a href="#control">control</a></li>
      </ul>
    </li>
    <li><a href="#3-dot-3-fault-tolerance">3.3 fault tolerance</a>
      <ul>
        <li><a href="#details">Details</a></li>
        <li><a href="#cyclic-graphs">cyclic graphs</a></li>
      </ul>
    </li>
    <li><a href="#3-dot-4-iterative-dataflows">3.4 iterative dataflows</a></li>
    <li><a href="#time">time</a></li>
    <li><a href="#stateful-stream">stateful stream</a></li>
    <li><a href="#windows">windows</a>
      <ul>
        <li><a href="#example">Example</a></li>
      </ul>
    </li>
    <li><a href="#async-stream-iteration">async stream iteration</a></li>
    <li><a href="#batch-analytics">Batch analytics</a></li>
    <li><a href="#query-optimization">Query optimization</a></li>
    <li><a href="#memory-management">Memory management</a></li>
    <li><a href="#iteration-control">Iteration control</a>
      <ul>
        <li><a href="#delta-iterate">delta iterate</a></li>
        <li><a href="#bulk-synchronous-parallel">Bulk synchronous parallel</a></li>
        <li><a href="#superstep-synchronization">superstep synchronization</a></li>
        <li><a href="#stale-synchronous-parallel">Stale synchronous parallel</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="https://www.frankliu.org/hugo/posts/facebook-memcached/">Facebook - memcached</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://www.frankliu.org/hugo/" >
    &copy;  My New Hugo Site 2020 
  </a>
    <div>



<a href="https://www.facebook.com/frankie.liu.9279" target="_blank" class="link-transition facebook link dib z-999 pt3 pt0-l mr1" title="Facebook link" rel="noopener" aria-label="follow on Facebook——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://twitter.com/pi31415629" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/frankieyliu/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/frankieliu" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>



<a href="https://medium.com/eins-zwei" target="_blank" class="link-transition medium link dib z-999 pt3 pt0-l mr1" title="Medium link" rel="noopener" aria-label="follow on Medium——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://discordapp.com/users/523372803387293696" target="_blank" class="link-transition discord link dib z-999 pt3 pt0-l mr1" title="Discord link" rel="noopener" aria-label="follow on Discord——Opens in a new window">
  

<svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<g
   id="g16"
   transform="matrix(0.73347458,0,0,0.73347458,-4.35805,2.2690639)"><path
     id="path2"
     d="m 104.4,103.9 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0.1,-6.1 -4.5,-11.1 -10.2,-11.1 z m 36.5,0 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0,-6.1 -4.5,-11.1 -10.2,-11.1 z"
     class="st0"
     inkscape:connector-curvature="0" /><path
     id="path4"
     d="M 189.5,20 H 55.5 C 44.2,20 35,29.2 35,40.6 v 135.2 c 0,11.4 9.2,20.6 20.5,20.6 h 113.4 l -5.3,-18.5 12.8,11.9 12.1,11.2 21.5,19 V 40.6 C 210,29.2 200.8,20 189.5,20 Z m -38.6,130.6 c 0,0 -3.6,-4.3 -6.6,-8.1 13.1,-3.7 18.1,-11.9 18.1,-11.9 -4.1,2.7 -8,4.6 -11.5,5.9 -5,2.1 -9.8,3.5 -14.5,4.3 -9.6,1.8 -18.4,1.3 -25.9,-0.1 -5.7,-1.1 -10.6,-2.7 -14.7,-4.3 -2.3,-0.9 -4.8,-2 -7.3,-3.4 -0.3,-0.2 -0.6,-0.3 -0.9,-0.5 -0.2,-0.1 -0.3,-0.2 -0.4,-0.3 -1.8,-1 -2.8,-1.7 -2.8,-1.7 0,0 4.8,8 17.5,11.8 -3,3.8 -6.7,8.3 -6.7,8.3 -22.1,-0.7 -30.5,-15.2 -30.5,-15.2 0,-32.2 14.4,-58.3 14.4,-58.3 14.4,-10.8 28.1,-10.5 28.1,-10.5 l 1,1.2 c -18,5.2 -26.3,13.1 -26.3,13.1 0,0 2.2,-1.2 5.9,-2.9 10.7,-4.7 19.2,-6 22.7,-6.3 0.6,-0.1 1.1,-0.2 1.7,-0.2 6.1,-0.8 13,-1 20.2,-0.2 9.5,1.1 19.7,3.9 30.1,9.6 0,0 -7.9,-7.5 -24.9,-12.7 l 1.4,-1.6 c 0,0 13.7,-0.3 28.1,10.5 0,0 14.4,26.1 14.4,58.3 0,0 -8.5,14.5 -30.6,15.2 z"
     class="st0"
     inkscape:connector-curvature="0" /></g></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>

</div>
  </div>
</footer>

    

  <script src="https://www.frankliu.org/hugo/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
