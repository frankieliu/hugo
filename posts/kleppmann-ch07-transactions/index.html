<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site  | Kleppmann Chapter 07 - Transactions</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.64.0" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    
    
      <link href="https://www.frankliu.org/hugo/dist/css/app.3f5912c237ddd38c8e76debe081c7ca7.css" rel="stylesheet">
    

    
      <link rel="stylesheet" type="text/css" href="https://www.frankliu.org/hugo/css/test.css">
    

    
      
    

    
    
    <meta property="og:title" content="Kleppmann Chapter 07 - Transactions" />
<meta property="og:description" content="Definition of transaction  a group of several reads and writes logical unit - looks like one operation all or nothing (commit or abort/rollback)  Who needs transactions  when you need certain guarantees  Acid  Atomicity - abortability (resiliant to faults) Consistency - some invariants about the data must be true Isolation - concurrent transactions are isolated  serializability - too strong   Durability - committed means data will not be lost  there is no perfect guarantee    Base  Basically Available, Soft state, and Eventual consistency  Single-Object vs Multi-Object Operations  many writes  atomicity : all written or none isolation : one transaction cannot see a partial write of another   identify multi-object transaction  tie to client&rsquo;s TCP connection - bad separate transaction id    Single object writes  Storage engine  atomicity : log for crash recovery isolation : using a lock atomic operations  increment compare-and-set      Multi-object transactions  when do you need them?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.frankliu.org/hugo/posts/kleppmann-ch07-transactions/" />
<meta property="article:published_time" content="2019-10-25T17:50:20-07:00" />
<meta property="article:modified_time" content="2019-10-26T19:54:53-07:00" />
<meta itemprop="name" content="Kleppmann Chapter 07 - Transactions">
<meta itemprop="description" content="Definition of transaction  a group of several reads and writes logical unit - looks like one operation all or nothing (commit or abort/rollback)  Who needs transactions  when you need certain guarantees  Acid  Atomicity - abortability (resiliant to faults) Consistency - some invariants about the data must be true Isolation - concurrent transactions are isolated  serializability - too strong   Durability - committed means data will not be lost  there is no perfect guarantee    Base  Basically Available, Soft state, and Eventual consistency  Single-Object vs Multi-Object Operations  many writes  atomicity : all written or none isolation : one transaction cannot see a partial write of another   identify multi-object transaction  tie to client&rsquo;s TCP connection - bad separate transaction id    Single object writes  Storage engine  atomicity : log for crash recovery isolation : using a lock atomic operations  increment compare-and-set      Multi-object transactions  when do you need them?">
<meta itemprop="datePublished" content="2019-10-25T17:50:20-07:00" />
<meta itemprop="dateModified" content="2019-10-26T19:54:53-07:00" />
<meta itemprop="wordCount" content="1082">



<meta itemprop="keywords" content="db,transactions,scalable,kleppmann," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Kleppmann Chapter 07 - Transactions"/>
<meta name="twitter:description" content="Definition of transaction  a group of several reads and writes logical unit - looks like one operation all or nothing (commit or abort/rollback)  Who needs transactions  when you need certain guarantees  Acid  Atomicity - abortability (resiliant to faults) Consistency - some invariants about the data must be true Isolation - concurrent transactions are isolated  serializability - too strong   Durability - committed means data will not be lost  there is no perfect guarantee    Base  Basically Available, Soft state, and Eventual consistency  Single-Object vs Multi-Object Operations  many writes  atomicity : all written or none isolation : one transaction cannot see a partial write of another   identify multi-object transaction  tie to client&rsquo;s TCP connection - bad separate transaction id    Single object writes  Storage engine  atomicity : log for crash recovery isolation : using a lock atomic operations  increment compare-and-set      Multi-object transactions  when do you need them?"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://www.frankliu.org/hugo/" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://www.frankliu.org/hugo/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://www.frankliu.org/hugo/posts/" title="Articles page">
              Articles
            </a>
          </li>
          
        </ul>
      
      



<a href="https://www.facebook.com/frankie.liu.9279" target="_blank" class="link-transition facebook link dib z-999 pt3 pt0-l mr1" title="Facebook link" rel="noopener" aria-label="follow on Facebook——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://twitter.com/pi31415629" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/frankieyliu/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/frankieliu" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>



<a href="https://medium.com/eins-zwei" target="_blank" class="link-transition medium link dib z-999 pt3 pt0-l mr1" title="Medium link" rel="noopener" aria-label="follow on Medium——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://discordapp.com/users/523372803387293696" target="_blank" class="link-transition discord link dib z-999 pt3 pt0-l mr1" title="Discord link" rel="noopener" aria-label="follow on Discord——Opens in a new window">
  

<svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<g
   id="g16"
   transform="matrix(0.73347458,0,0,0.73347458,-4.35805,2.2690639)"><path
     id="path2"
     d="m 104.4,103.9 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0.1,-6.1 -4.5,-11.1 -10.2,-11.1 z m 36.5,0 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0,-6.1 -4.5,-11.1 -10.2,-11.1 z"
     class="st0"
     inkscape:connector-curvature="0" /><path
     id="path4"
     d="M 189.5,20 H 55.5 C 44.2,20 35,29.2 35,40.6 v 135.2 c 0,11.4 9.2,20.6 20.5,20.6 h 113.4 l -5.3,-18.5 12.8,11.9 12.1,11.2 21.5,19 V 40.6 C 210,29.2 200.8,20 189.5,20 Z m -38.6,130.6 c 0,0 -3.6,-4.3 -6.6,-8.1 13.1,-3.7 18.1,-11.9 18.1,-11.9 -4.1,2.7 -8,4.6 -11.5,5.9 -5,2.1 -9.8,3.5 -14.5,4.3 -9.6,1.8 -18.4,1.3 -25.9,-0.1 -5.7,-1.1 -10.6,-2.7 -14.7,-4.3 -2.3,-0.9 -4.8,-2 -7.3,-3.4 -0.3,-0.2 -0.6,-0.3 -0.9,-0.5 -0.2,-0.1 -0.3,-0.2 -0.4,-0.3 -1.8,-1 -2.8,-1.7 -2.8,-1.7 0,0 4.8,8 17.5,11.8 -3,3.8 -6.7,8.3 -6.7,8.3 -22.1,-0.7 -30.5,-15.2 -30.5,-15.2 0,-32.2 14.4,-58.3 14.4,-58.3 14.4,-10.8 28.1,-10.5 28.1,-10.5 l 1,1.2 c -18,5.2 -26.3,13.1 -26.3,13.1 0,0 2.2,-1.2 5.9,-2.9 10.7,-4.7 19.2,-6 22.7,-6.3 0.6,-0.1 1.1,-0.2 1.7,-0.2 6.1,-0.8 13,-1 20.2,-0.2 9.5,1.1 19.7,3.9 30.1,9.6 0,0 -7.9,-7.5 -24.9,-12.7 l 1.4,-1.6 c 0,0 13.7,-0.3 28.1,10.5 0,0 14.4,26.1 14.4,58.3 0,0 -8.5,14.5 -30.6,15.2 z"
     class="st0"
     inkscape:connector-curvature="0" /></g></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


    </div>
  </div>
</nav>

    </div>
  </header>




    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        ARTICLES
      </p>
      <h1 class="f1 athelas mb1">Kleppmann Chapter 07 - Transactions</h1>
      
      <p class="tracked">
          By <strong>
          
              adam
          
          </strong>
      </p>
      
      
      <time class="f6 mv4 dib tracked" datetime="2019-10-25T17:50:20-07:00">October 25, 2019</time>
      
      
    </header>

    <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h2 id="definition-of-transaction">Definition of transaction</h2>
<ul>
<li>a group of several reads and writes</li>
<li>logical unit - looks like one operation</li>
<li>all or nothing (commit or abort/rollback)</li>
</ul>
<h2 id="who-needs-transactions">Who needs transactions</h2>
<ul>
<li>when you need certain guarantees</li>
</ul>
<h2 id="acid">Acid</h2>
<ul>
<li>Atomicity - abortability (resiliant to faults)</li>
<li>Consistency - some invariants about the data must be true</li>
<li>Isolation - concurrent transactions are isolated
<ul>
<li>serializability - too strong</li>
</ul>
</li>
<li>Durability - committed means data will not be lost
<ul>
<li>there is no perfect guarantee</li>
</ul>
</li>
</ul>
<h2 id="base">Base</h2>
<ul>
<li>Basically Available, Soft state, and Eventual consistency</li>
</ul>
<h2 id="single-object-vs-multi-object-operations">Single-Object vs Multi-Object Operations</h2>
<ul>
<li>many writes
<ul>
<li>atomicity : all written or none</li>
<li>isolation : one transaction cannot see a partial write of another</li>
</ul>
</li>
<li>identify multi-object transaction
<ul>
<li>tie to client&rsquo;s TCP connection - bad</li>
<li>separate transaction id</li>
</ul>
</li>
</ul>
<h3 id="single-object-writes">Single object writes</h3>
<ul>
<li>Storage engine
<ul>
<li>atomicity : log for crash recovery</li>
<li>isolation : using a lock</li>
<li>atomic operations
<ul>
<li>increment</li>
<li>compare-and-set</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="multi-object-transactions">Multi-object transactions</h3>
<ul>
<li>when do you need them?
<ul>
<li>hard because of partitioning</li>
<li>foreign key in another table - make sure references are valid</li>
<li>document data model - require denormalization
<ul>
<li>when update happens several documents changed</li>
</ul>
</li>
<li>secondary indexes</li>
</ul>
</li>
</ul>
<h3 id="handling-errors-and-aborts">Handling errors and aborts</h3>
<ul>
<li>abort and retry failures
<ul>
<li>network failures
<ul>
<li>app doesn&rsquo;t get ACK</li>
</ul>
</li>
<li>overload
<ul>
<li>exponential backoff - limit number of retries</li>
</ul>
</li>
<li>permanent errors</li>
<li>side effects of transactions : emails</li>
<li>client fails in retry</li>
</ul>
</li>
</ul>
<h2 id="weak-isolation-levels">Weak Isolation Levels</h2>
<ul>
<li>serializable isolation too costly</li>
</ul>
<h3 id="read-committed">Read committed</h3>
<ul>
<li>When reading from DB, only read committed data
<ul>
<li>no dirty reads, why
<ul>
<li>don&rsquo;t want to read several modifications in a transaction</li>
<li>don&rsquo;t want to read something that gets rollback</li>
</ul>
</li>
</ul>
</li>
<li>Where writing to DB, only overwrite data that has been committed
<ul>
<li>no dirty writes, why
<ul>
<li>A and B try to buy same car, listing and sales DB, invoice ovrwrt</li>
<li>read committed does not prevent race condition btw counter increment</li>
<li></li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>T1</th>
<th>T2</th>
</tr>
</thead>
<tbody>
<tr>
<td>SA</td>
<td></td>
</tr>
<tr>
<td></td>
<td>SB</td>
</tr>
<tr>
<td></td>
<td>IB</td>
</tr>
<tr>
<td>IA</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>Implementation
<ul>
<li>row-level locks for duration of transaction</li>
<li>lock for reads slows down the system
<ul>
<li>instead DB returns only returns committed reads</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="snapshot-isolation-repeatable-read">Snapshot isolation / repeatable read</h3>
<ul>
<li>read committed failures
<ul>
<li>read skew or nonrepeatable read
<ul>
<li>Reading from two accounts where transfer happens in between reading
<ul>
<li>read $500 in one account</li>
<li>transfer happened in between, moving $100 from one account to another</li>
<li>read $400 in another account</li>
</ul>
</li>
</ul>
</li>
<li>Backups
<ul>
<li>backing up while updates are happening
<ul>
<li>parts of the backup with have older data &ndash; inconsistent</li>
</ul>
</li>
</ul>
</li>
<li>Analytic queries and integrity checks</li>
</ul>
</li>
</ul>
<h2 id="snapshot-isolation">Snapshot isolation</h2>
<ul>
<li>Transaction reads from a consistent snapshot of the database
<ul>
<li>sees all the data that was committed at the start of the transactoin</li>
</ul>
</li>
<li>Implementation
<ul>
<li>write locks to prevent dirty writes</li>
<li>no locks on reads
<ul>
<li>DB keeps different committed versions of an object
<ul>
<li>multi-version concurrency control (MVCC)
<ul>
<li>for read committed, snapshot per query</li>
<li>for snapshot isolation, snapshot per transaction</li>
</ul>
</li>
<li>each transaction - increasing transaction ID (txid)
<ul>
<li>each row has a created_by field w txid</li>
<li>each row has a deleted_by field w txid
<ul>
<li>GC when no transactions access</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>txid decides read visibility</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="indexes">Indexes</h3>
<ul>
<li>keep all the versions
<ul>
<li>let query filter visible ones</li>
<li>GC when no longer visible to any transactions</li>
</ul>
</li>
<li>B-tree with append-only/copy-on-write
<ul>
<li>parent pages are copied and updated to point to new versions</li>
<li>each root is a consistent snapshot of the DB</li>
<li>GC</li>
</ul>
</li>
</ul>
<h2 id="preventing-lost-updates">Preventing lost updates</h2>
<ul>
<li>two reads on same and modify data - clobber
<ul>
<li>scenario: inc counter, json object, wiki page</li>
</ul>
</li>
<li>atomic writes
<ul>
<li>atomic update counter</li>
<li>atomic write json</li>
<li>exclusive read/write lock on object - cursor stability</li>
</ul>
</li>
<li>explicit locking
<ul>
<li>FOR UPDATE: lock all selected rows</li>
</ul>
</li>
<li>alternative detect lost update</li>
<li>compare-and-set
<ul>
<li>send previous read and new value, only set if previous matches</li>
</ul>
</li>
</ul>
<h3 id="conflict-resolution-in-multi-leader-and-leaderless">conflict resolution in multi-leader and leaderless</h3>
<ul>
<li>replicas take writes</li>
<li>maintain different versions</li>
<li>commutative operations such as inc are ok</li>
<li>last write wins (LWW) prone to lost updates</li>
</ul>
<h2 id="write-skew">Write skew</h2>
<h3 id="doctor-call-list">doctor call list</h3>
<ul>
<li>crux writing to different rows on on-call table
<ul>
<li>previously writing to same data</li>
</ul>
</li>
</ul>
<h3 id="non-working-solutions">non-working solutions</h3>
<ul>
<li>atomic single-object don&rsquo;t help</li>
<li>automatic detection of lost updates not detectable</li>
</ul>
<h3 id="partial-solutions">partial solutions</h3>
<ul>
<li>constraints, uniqueness or foreign key restrictions, but contraints over
multiple object is hard</li>
<li>explicitly lock all rows with FOR UPDATE</li>
</ul>
<h3 id="other-examples">other examples</h3>
<ul>
<li>Meeting room booking</li>
<li>Multiplayer game - lock to prevent two players from moving same figure,
but does not prevent two users to move simultaneously while avoiding
some constraint, going to same bathroom</li>
<li>Claiming a username - uniqueness constraint</li>
<li>Double spending - inserting two items below threshold</li>
</ul>
<h3 id="phantom-pattern">phantom pattern</h3>
<ul>
<li>read/modify/write</li>
<li>doctor example can lock rows</li>
<li>other examples can&rsquo;t attach lock</li>
<li>write affect the query in another - phantom</li>
</ul>
<h3 id="materializing-phantoms">materializing phantoms</h3>
<ul>
<li>meeting room
<ul>
<li>create room-time-period rows</li>
</ul>
</li>
</ul>
<h2 id="serializability">Serializability</h2>
<h3 id="single-thread-execution">single-thread execution</h3>
<h4 id="stored-procedure">stored procedure</h4>
<ul>
<li>send application code to make decisions, remove network hop</li>
<li>hard to debug and can hog DB</li>
</ul>
<h4 id="partitioning">partitioning</h4>
<ul>
<li>multi-partition transactions - hard</li>
</ul>
<h4 id="limitations">limitations</h4>
<ul>
<li>transactions must be small and fast, no long tail</li>
<li>active dataset must fit into memory
<ul>
<li>use anti-caching, abort transaction, fetch data to memory</li>
</ul>
</li>
<li>write throught could slow things down require partitioning</li>
<li>limit cross-partition transactions</li>
</ul>
<h2 id="two-phase-locking--2pl">two-phase locking (2PL)</h2>
<ul>
<li>read lock in shared more</li>
<li>write exclusive lock</li>
<li>upgrade from shared to exclusive if r/w same object</li>
<li>hold lock until end of transaction</li>
</ul>
<h3 id="limitations">Limitations</h3>
<ul>
<li>several transactions (even simple ones) will form queue</li>
<li>unstable latencies
<ul>
<li>very slow at high percentiles</li>
</ul>
</li>
<li>deadlocks</li>
</ul>
<h3 id="predicate-locks">predicate locks</h3>
<ul>
<li>cannot have phantoms
<ul>
<li>select * from table where room=123 and start_time &gt; &amp; end_time &lt;</li>
<li>predicates lock on phantom rows which don&rsquo;t exist yet</li>
</ul>
</li>
</ul>
<h3 id="index-range-locks">index-range locks</h3>
<ul>
<li>have index on room_id and index on start_time and end_time
<ul>
<li>shared lock on room_id index</li>
<li>or shared lock on time range index</li>
</ul>
</li>
<li>inserting update or deletion will have to update a locakable index</li>
</ul>
<h2 id="serializable-snapshot-isolation--ssi">Serializable Snapshot Isolation (SSI)</h2>
<ul>
<li>optimistic concurrency control</li>
<li>detect isolation violation - abort and retry</li>
</ul>
<h3 id="implementaion">implementaion</h3>
<ul>
<li>detect reads of a stale MVCC object</li>
<li>detect writes that affect prior reads</li>
</ul>
<h3 id="detecting-stale-mvcc-reads">detecting stale MVCC reads</h3>
<ul>
<li>doctor example:
<ul>
<li>A&rsquo;s update doctors on_call affects B&rsquo;s reading of it</li>
<li>B&rsquo;s reading on an ealier MVCC vs A&rsquo;s later txid</li>
</ul>
</li>
</ul>
<h3 id="detecting-writes-that-affect-prior-reads">detecting writes that affect prior reads</h3>
<ul>
<li>doctor example:
<ul>
<li>A and B both read, but at different transactions, track this</li>
<li>on a write, see affected reads</li>
</ul>
</li>
</ul>
<h3 id="performance">performance</h3>
<ul>
<li>trade-off in granularity of r/w tracking</li>
</ul>
<h2 id="summary">Summary</h2>
<p>Treatment of different isolation levels</p>
<ul>
<li>
<p>read committed (no dirty reads and no dirty writes)</p>
<ul>
<li>only read what has been committed</li>
<li>only overwrite what has been committed
<ul>
<li>don&rsquo;t overwrite partial transactions</li>
</ul>
</li>
</ul>
</li>
<li>
<p>snapshot isolation</p>
<ul>
<li>prevent read skews</li>
<li>read a consistent state of the DB</li>
<li>good when have to read a bunch of things</li>
<li>implemented with MVCC</li>
</ul>
</li>
<li>
<p>write concurrency issues</p>
<ul>
<li>lost updates on read-modify-write cycle
<ul>
<li>lock all relevant rows</li>
</ul>
</li>
<li>write skew also a read-modify-write but acting on different rows</li>
<li>phantom reads
<ul>
<li>cannot lock on non-existing rows</li>
<li>materialize or index-range lock</li>
</ul>
</li>
</ul>
</li>
<li>
<p>serializable isolation (strongest)</p>
<ul>
<li>single thread execution</li>
<li>two phase locking</li>
<li>serializable snapshot isolation
<ul>
<li>also use MVCC to detect isolation violations</li>
</ul>
</li>
</ul>
</li>
<li>
<p>serializable</p>
</li>
</ul>
<ul class="pa0">
  
   <li class="list">
     <a href="https://www.frankliu.org/hugo/tags/db" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">db</a>
   </li>
  
   <li class="list">
     <a href="https://www.frankliu.org/hugo/tags/transactions" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">transactions</a>
   </li>
  
   <li class="list">
     <a href="https://www.frankliu.org/hugo/tags/scalable" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">scalable</a>
   </li>
  
   <li class="list">
     <a href="https://www.frankliu.org/hugo/tags/kleppmann" class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">kleppmann</a>
   </li>
  
</ul>
<div class="mt6">
      
      
			<script src="https://utteranc.es/client.js"
        repo="frankieliu/hugo"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
      </script>
      </div>
    </section>

    <aside class="w-30-l mt6-l">




  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">Related</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="https://www.frankliu.org/hugo/posts/dynamo/">DynamoDB</a>
        </li>
	    
	     <li  class="mb2">
          <a href="https://www.frankliu.org/hugo/posts/vector-clocks/">Vector clocks</a>
        </li>
	    
	     <li  class="mb2">
          <a href="https://www.frankliu.org/hugo/posts/spanner/">Spanner</a>
        </li>
	    
    </ul>
</div>

</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://www.frankliu.org/hugo/" >
    &copy;  My New Hugo Site 2020 
  </a>
    <div>



<a href="https://www.facebook.com/frankie.liu.9279" target="_blank" class="link-transition facebook link dib z-999 pt3 pt0-l mr1" title="Facebook link" rel="noopener" aria-label="follow on Facebook——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://twitter.com/pi31415629" target="_blank" class="link-transition twitter link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel="noopener" aria-label="follow on Twitter——Opens in a new window">
  <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://www.linkedin.com/in/frankieyliu/" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/frankieliu" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>



<a href="https://medium.com/eins-zwei" target="_blank" class="link-transition medium link dib z-999 pt3 pt0-l mr1" title="Medium link" rel="noopener" aria-label="follow on Medium——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M46.5340803,65.2157554 C46.6968378,63.6076572 46.0836,62.018231 44.8828198,60.93592 L32.6512605,46.2010582 L32.6512605,44 L70.6302521,44 L99.9859944,108.380952 L125.794585,44 L162,44 L162,46.2010582 L151.542017,56.2281011 C150.640424,56.9153477 150.193188,58.0448862 150.380019,59.1628454 L150.380019,132.837155 C150.193188,133.955114 150.640424,135.084652 151.542017,135.771899 L161.755369,145.798942 L161.755369,148 L110.38282,148 L110.38282,145.798942 L120.963119,135.527337 C122.002801,134.487948 122.002801,134.182246 122.002801,132.592593 L122.002801,73.0417402 L92.585901,147.755438 L88.6106443,147.755438 L54.3622782,73.0417402 L54.3622782,123.115814 C54.0767278,125.221069 54.7759199,127.3406 56.2581699,128.863022 L70.0186741,145.55438 L70.0186741,147.755438 L31,147.755438 L31,145.55438 L44.7605042,128.863022 C46.2319621,127.338076 46.8903838,125.204485 46.5340803,123.115814 L46.5340803,65.2157554 Z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>




<a href="https://discordapp.com/users/523372803387293696" target="_blank" class="link-transition discord link dib z-999 pt3 pt0-l mr1" title="Discord link" rel="noopener" aria-label="follow on Discord——Opens in a new window">
  

<svg  height="32px"  style="enable-background:new 0 0 170 170;" version="1.1" viewBox="0 0 170 170" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<g
   id="g16"
   transform="matrix(0.73347458,0,0,0.73347458,-4.35805,2.2690639)"><path
     id="path2"
     d="m 104.4,103.9 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0.1,-6.1 -4.5,-11.1 -10.2,-11.1 z m 36.5,0 c -5.7,0 -10.2,5 -10.2,11.1 0,6.1 4.6,11.1 10.2,11.1 5.7,0 10.2,-5 10.2,-11.1 0,-6.1 -4.5,-11.1 -10.2,-11.1 z"
     class="st0"
     inkscape:connector-curvature="0" /><path
     id="path4"
     d="M 189.5,20 H 55.5 C 44.2,20 35,29.2 35,40.6 v 135.2 c 0,11.4 9.2,20.6 20.5,20.6 h 113.4 l -5.3,-18.5 12.8,11.9 12.1,11.2 21.5,19 V 40.6 C 210,29.2 200.8,20 189.5,20 Z m -38.6,130.6 c 0,0 -3.6,-4.3 -6.6,-8.1 13.1,-3.7 18.1,-11.9 18.1,-11.9 -4.1,2.7 -8,4.6 -11.5,5.9 -5,2.1 -9.8,3.5 -14.5,4.3 -9.6,1.8 -18.4,1.3 -25.9,-0.1 -5.7,-1.1 -10.6,-2.7 -14.7,-4.3 -2.3,-0.9 -4.8,-2 -7.3,-3.4 -0.3,-0.2 -0.6,-0.3 -0.9,-0.5 -0.2,-0.1 -0.3,-0.2 -0.4,-0.3 -1.8,-1 -2.8,-1.7 -2.8,-1.7 0,0 4.8,8 17.5,11.8 -3,3.8 -6.7,8.3 -6.7,8.3 -22.1,-0.7 -30.5,-15.2 -30.5,-15.2 0,-32.2 14.4,-58.3 14.4,-58.3 14.4,-10.8 28.1,-10.5 28.1,-10.5 l 1,1.2 c -18,5.2 -26.3,13.1 -26.3,13.1 0,0 2.2,-1.2 5.9,-2.9 10.7,-4.7 19.2,-6 22.7,-6.3 0.6,-0.1 1.1,-0.2 1.7,-0.2 6.1,-0.8 13,-1 20.2,-0.2 9.5,1.1 19.7,3.9 30.1,9.6 0,0 -7.9,-7.5 -24.9,-12.7 l 1.4,-1.6 c 0,0 13.7,-0.3 28.1,10.5 0,0 14.4,26.1 14.4,58.3 0,0 -8.5,14.5 -30.6,15.2 z"
     class="st0"
     inkscape:connector-curvature="0" /></g></svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>

</div>
  </div>
</footer>

    

  <script src="https://www.frankliu.org/hugo/dist/js/app.3fc0f988d21662902933.js"></script>


  </body>
</html>
