<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-09-14 Sat 18:31 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>"920 Number of music playlists"</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="adam" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">"920 Number of music playlists"</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org47614d1">1. Notes on solution to Leetcode 920</a></li>
</ul>
</div>
</div>

<div id="outline-container-org47614d1" class="outline-2">
<h2 id="org47614d1"><span class="section-number-2">1</span> Notes on solution to Leetcode 920</h2>
<div class="outline-text-2" id="text-1">
<p>
Let's take the example from the article, songs: \(\left\{abcde\right\}\),
playlist: \(abacabdcbaeacbd\),
</p>

<p>
\(\bar{x} = (1,2,4,7,11)\)
</p>

<p>
For \(\bar{x}\), each number in the n-tuple indicates a position in the playlist
for the first occurrence of a particular unique song. The article uses
1-indexing so I will use the same to be consistent.
</p>

<p>
As an example for the \(\bar{x}\) above, consider the playlist family:
</p>

<p>
\(p_l = (1_1,2_2,c_3,3_4,c_5,c_6,4_7,c_8,c_9,c_{10},5_{11},c_{12},c_{13},c_{14})\)
</p>

<p>
Here I have used the numbers (characters) \(1-5\), to indicate a song number,
instead of the \(a-e\) in the article. The subscripts indicate the position in
\(p_l\) for ease of reference. And I will refer to the song as characters in a
string for simplicity. The characters \(c\) in \(p_l\) indicate the possible
characters that may be inserted at that position. Note that for the character
\(c\) at position 3, since I have only seen \(2\) unique songs so far, \(c_3\) must
come from \(\left\{1,2\right\}\) whereas for \(c_{5,6}\) must come from the set
\(\{1,2,3\}\) since I have only seen \(3\) unique songs so far.
</p>

<p>
Now take in consideration the restriction of \(K\), it implies that there must be
a window \(K+1\) of non-repeating characters. Let's take \(K+1 = 2\) for the example
above. That means for the \(c_3\), its choice of characters must come from the set
\(\left\{1,2\right\}\) and in addition it must be different from character at
position \(2\) ("\(2\)" in the example above). This restriction implies that there
is only one possible choice for \(c_3\), namely "\(1\)". We will count this
possibility as \(1^\delta\), where \(\delta\) denotes the number of characters
between the first occurrence of the $K+1$th character and the first occurrence
of the $K+2$th character, or \(x_{K+2}-x_{K+1}-1\) from \(\bar{x}\). Similarly for
\(c\) at positions \(5\) and \(6\), their choice must come from the set
\(\left\{1,2,3\right\}\) and in addition it must differ from the previous \(K\)
characters, translating to a choice of two characters for \(c_{5,6}\). We will
count this possibilities as \(2^\delta\), where \(\delta\) here denotes the number
of characters between \(K+2\) and \(K+3\) characters (first occurrences), or
\(x_{K+3} - x_{K+2} - 1\).
</p>

<p>
The careful reader will note that I count the first \(K+1\) characters as being
unique, whereas the article counts the first \(K\) characters. My suspicion is
that the author also thinks in terms of a window of \(K\) unique characters rather
than of \(K+1\) characters, thus interchanging the usage of the \(K\) previous other
characters with the window length for unique characters. To be consistent, I
stick with the definition of \(K\) in the problem statement.
</p>

<p>
Given \(N\), \(L\), and \(K\), how many \(\delta\)'s are there? This should be equal to
the number of unique characters discounting the grouping at the beginning or
\(N-K \equiv P\). Conveniently, the article suggests adding a \(x_{N+1} = L+1\) to
\(\bar{x}\) so the last \(\delta\) can be determined from \(\bar{x}\).
</p>

<p>
Given \(N\), \(L\), and \(K\), what is the sum of \(\delta\) values? Since each \(\delta\)
for a given \(\bar{x}\) corresponds to the spacing between first occurrences, the
total sum of spaces plus the unique characters must sum to \(L\), in other words,
\(\sum \delta_i + N = L\), or \(\sum \delta_i = L-N \equiv S\), where I have appended
a subscript \(i\) to enumerate each spacing. Note that a vector of \(\delta_i\)'s
uniquely determines an \(\bar{x}\). So an enumeration of all possible \(\bar{x}\) is
equivalent to enumerating all possible \(\bar{\delta}\), where a \(\bar{\delta}\)
denotes a n-tuple of \(\delta_i\)'s corresponding to some \(\bar{x}\). The article
expresses the sum of all these enumerations as
 \[
 \sum_{\bar{\delta}\ \rm{ s.t. }\sum \delta_i = S} \cdots
 \]
To be consistent with the definition of \(K\) in the problem.  The final answer
should almost match the one in the article 
\[
N! \left( \sum_{\bar{\delta}} \mathop{\LARGE\Pi}_{j=1}^{N-K} j^{x_{K+1+j}-x_{K+j}-1} \right)
\]
</p>

<p>
For the answer utilizing the generating functions, the key idea is as follow,
you are looking for all combinations of \(P\) numbers that sum up to a number \(S\).
The \(x^S\) coefficient of the generating function is conveniently the sum of all
possible \(j^\delta\) products. Since each infinite geometric series in the
generating function can be expressed as simple fraction, the generation function
becomes the product of simple fractions. 
</p>

<p>
The product of fractions can be expanded to the sum of partials fractions. Since
each partial fraction has the form of the sum of an infinite geometric series,
we just return the \(x^S\) term from each of the partial fractions.
</p>

<p>
The only other thing not mentioned in the article, but used in the code is
finding the inverse of a number in a modulo ring. One way to get the inverse of
a number is to use the extended Eucledian algorithm. Instead, for modulo \(p\),
where \(p\) is prime, we can use Fermat's little theorem, which says that \(a^p
\equiv a \mod p\), so \(a^{p-1} \equiv 1 \mod p\), and \(a^{p-2} \equiv a^{-1}
\mod p\), which shows up in the article's solution.
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2019-08-30T19:13:32-07:00</p>
<p class="author">Author: adam</p>
<p class="date">Created: 2019-09-14 Sat 18:31</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
